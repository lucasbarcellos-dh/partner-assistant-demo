// src/components/ChatDrawer.scss
@import '../styles/variables';
@import '../styles/mixins';

// Keyframes for animations
@keyframes message-fade-in {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes blink {
  50% { opacity: 1; }
}

// Main ChatDrawer component
.chat-drawer {
  position: fixed;
  top: 0;
  right: -$drawer-width;
  width: $drawer-width;
  height: 100vh;
  background-color: $background-white;
  @include transition(right, $transition-medium, cubic-bezier(0, 0, 0.2, 1));
  @include flex-column;
  z-index: $z-index-drawer;
  border-radius: $border-radius-lg 0 0 32px;
  
  &.open {
    right: 0;
  }
  
  // Apply gradient when in initial state
  &.initial-state {
    background-color: #fff;
    background-image:
      linear-gradient(
        rgba(rgba(255,255,255), 0),
        rgba(rgba(255,255,255), 1),
      ),
      linear-gradient(
        rgba(adjust-color($primary-color, $hue: -33deg, $saturation: 100%), 0.04),
        rgba($primary-color, 0.04),
        rgba(adjust-color($primary-color, $hue: +33deg, $saturation: 100%), 0.04),
      );
    @include transition(all, $transition-medium, cubic-bezier(0, 0, 0.2, 1));
  }
  
  @include respond-to(medium) {
    border-radius: 0;
    width: 100%;
    right: -100%;
  }
}

// Import component style modules
@import './chat/ChatHeader';
@import './chat/MessageList';
@import './chat/ChatInput';
@import './chat/QuestionChips';

// Chat Container Styles
.chat-container {
  flex: 1;
  @include flex-column;
  overflow: hidden;
  position: relative;
  @include transition(all, $transition-medium);
  
  // Centered input state (initial)
  &.centered-input {
    justify-content: center;
    padding-top: 0;
    
    .messages-container {
      display: none;
    }
    
    .input-container {
      position: relative;
      @include flex-column;
      align-items: center;
      margin: 0 48px;
      padding-bottom: 30%;
    }
    
    .welcome-section {
      @include flex-column;
      align-items: center;
    }
    
    .welcome-text {
      text-align: center;
      font-size: 18px;
      color: $text-branded-primary;
      line-height: $line-height-base;
      margin-bottom: $spacing-xl;
      @include slide-in('up', 20px, 0.5s);
    }
    
    .input-wrapper {
      @include slide-in('up', 20px, 0.5s);
    }
    
    // Apply branded shadow in initial state
    .input-wrapper .chat-textarea {
      box-shadow: $box-shadow-branded;
      border: none;
    }
  }
  
  // Bottom input state (after interaction)
  &.bottom-input {
    justify-content: space-between;
    @include slide-in('up', 20px, 0.3s);
    
    .messages-container {
      flex: 1;
      overflow-y: auto;
      padding: 16px $spacing-xl $spacing-xl;
      display: block;
    }
    
    .input-container {
      position: relative;
      padding: $spacing-lg;
      display: flex;
      flex-direction: row;
      width: 100%;
    }
    
    // Apply subtle border after interaction
    .input-wrapper .chat-textarea {
      box-shadow: none;
      border: 1px solid $border-light;
      font-size: 18px;
      &::placeholder {
        color: rgba($text-primary, 0.37);
      }
    }
  }
}

.welcome-section {
  width: 100%;
}

// Centered Icon
.centered-icon {
  display: flex;
  justify-content: center;
  margin-bottom: $spacing-xl;
  animation: message-fade-in 0.5s ease-out;
  
  // Apply gradient to centered sparkle icon
  svg {
    path, circle {
      fill: url(#brandedGradient);
    }
  }
}

// Centered Title
.centered-title {
  font-size: $font-size-xxlarge;
  letter-spacing: -0.5px;
  font-weight: 700;
  margin: 0 0 12px 0;
  text-align: center;
  color: transparent;  // Make text color transparent to show gradient
  background: linear-gradient(
    225deg,
    adjust-color($primary-color, $hue: +20deg, $saturation: 70%),
    $primary-color,
    adjust-color($primary-color, $hue: -20deg, $saturation: 70%)
  );
  -webkit-background-clip: text;
  background-clip: text;
  width: 100%;
  opacity: 1;
  @include transition(opacity);
  @include slide-in('up', 20px, 0.5s);
}

// Welcome Text 
.welcome-text {
  @include transition(opacity);
}

// Input Container
.input-container {
  @include transition(all, $transition-medium);
}